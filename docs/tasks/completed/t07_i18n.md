# Task: Implement Internationalization (i18n) for Korean and English

## Task ID: t07_i18n

## Status: Completed

## Description
Implement full internationalization support for the AWAVES application, enabling seamless switching between Korean and English languages across all UI components.

## Requirements

### 1. i18n Framework Setup
- [ ] Install and configure `next-intl` or `react-i18next`
- [ ] Set up language detection (browser preference, saved preference)
- [ ] Create language context provider
- [ ] Configure middleware for locale routing (optional: `/ko/`, `/en/` routes)

### 2. Translation Files Structure
```
apps/web/
├── locales/
│   ├── en/
│   │   ├── common.json      # Shared translations
│   │   ├── map.json         # Map page translations
│   │   ├── forecast.json    # Forecast popup translations
│   │   └── mypage.json      # My page translations
│   └── ko/
│       ├── common.json
│       ├── map.json
│       ├── forecast.json
│       └── mypage.json
```

### 3. Components to Translate

#### Map Page (`apps/web/app/map/page.tsx`)
- [x] Header buttons (Filters, Wind Particles, Surf Score, Safety Score)
- [x] Navigation links (Saved, My Page)
- [x] Search placeholder
- [x] Filter labels
- [ ] Loading states
- [ ] Error messages

#### Forecast Popup (`apps/web/components/ForecastPopup.tsx`)
- [ ] "Surf Score" label
- [ ] "Safety" label
- [ ] Score labels: "Good", "Fair", "Poor"
- [ ] Safety labels: "Safe", "Moderate", "Caution"
- [ ] Data row labels: "Wave Height", "Wave Period", "Wind Speed", "Swell Height", "Water Temp", "Air Temp"
- [ ] "Save Spot" / "Saved" button text

#### Date Selector (`apps/web/components/DateSelector.tsx`)
- [ ] "Today" label
- [ ] "Tomorrow" label
- [ ] Date format (locale-aware)

#### Other Components
- [ ] `SurfDataPopup.tsx` - Condition labels
- [ ] `SpotPopup.tsx` - Button labels
- [ ] Homepage content
- [ ] Error pages
- [ ] Auth pages (login, signup)

### 4. Date/Number Formatting
- [ ] Use `date-fns` locale for date formatting
- [ ] Temperature units (Celsius displayed, consider Fahrenheit option)
- [ ] Distance units (km displayed)
- [ ] Number formatting for Korean locale

### 5. Geocoding Language
- [ ] Pass `language` parameter to Mapbox Geocoding API
- [ ] Return location names in user's selected language

## Technical Approach

### Option A: next-intl (Recommended)
```typescript
// next.config.js
const withNextIntl = require('next-intl/plugin')();
module.exports = withNextIntl({});

// app/[locale]/layout.tsx
import {NextIntlClientProvider} from 'next-intl';

// Usage in components
import {useTranslations} from 'next-intl';
const t = useTranslations('map');
<button>{t('surfScore')}</button>
```

### Option B: react-i18next
```typescript
// i18n.ts configuration
import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';

// Usage in components
import { useTranslation } from 'react-i18next';
const { t } = useTranslation('map');
<button>{t('surfScore')}</button>
```

## Translation Keys Example

### en/forecast.json
```json
{
  "surfScore": "Surf Score",
  "safety": "Safety",
  "scoreLabels": {
    "good": "Good",
    "fair": "Fair",
    "poor": "Poor"
  },
  "safetyLabels": {
    "safe": "Safe",
    "moderate": "Moderate",
    "caution": "Caution"
  },
  "dataLabels": {
    "waveHeight": "Wave Height",
    "wavePeriod": "Wave Period",
    "windSpeed": "Wind Speed",
    "swellHeight": "Swell Height",
    "waterTemp": "Water Temp",
    "airTemp": "Air Temp"
  },
  "saveSpot": "Save Spot",
  "saved": "Saved"
}
```

### ko/forecast.json
```json
{
  "surfScore": "서핑 점수",
  "safety": "안전도",
  "scoreLabels": {
    "good": "좋음",
    "fair": "보통",
    "poor": "나쁨"
  },
  "safetyLabels": {
    "safe": "안전",
    "moderate": "주의",
    "caution": "위험"
  },
  "dataLabels": {
    "waveHeight": "파고",
    "wavePeriod": "파주기",
    "windSpeed": "풍속",
    "swellHeight": "너울",
    "waterTemp": "수온",
    "airTemp": "기온"
  },
  "saveSpot": "스팟 저장",
  "saved": "저장됨"
}
```

## Backend Integration (Future)
- [ ] Store user language preference in database
- [ ] Return localized error messages from API
- [ ] Localize notification content

## Acceptance Criteria
1. Language toggle switches all visible text immediately
2. Selected language persists across page refreshes (localStorage)
3. Date formats match locale conventions
4. Geocoding returns location names in selected language
5. No untranslated text visible in either language
6. TypeScript types ensure all translation keys exist

## Estimated Effort
- Setup: 2-3 hours
- Translation files: 2-3 hours
- Component updates: 4-6 hours
- Testing: 2 hours
- Total: ~12-14 hours

## Dependencies
- `next-intl` or `react-i18next`
- `date-fns` locales (already installed)

## Notes
- Current implementation has partial translations in `page.tsx` only
- The `translations` object should be migrated to proper i18n files
- Consider RTL support for future language additions (Arabic, Hebrew)
