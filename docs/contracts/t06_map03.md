# Contract: t06_map03 — Frontend Local Database Schema Alignment

## Status: AGREED

## Frontend Requirements

### DynamoDB: surf_info Table
```typescript
interface SurfInfo {
  LocationId: string;          // PK: "{lat}#{lng}" (4 decimal)
  SurfTimestamp: string;       // SK: ISO 8601
  geo: { lat: number; lng: number };
  conditions: {
    waveHeight: number;        // meters
    wavePeriod: number;        // seconds
    windSpeed: number;         // km/h
    waterTemperature: number;  // °C
  };
  derivedMetrics: {
    surfScore: number;         // 0-100
    surfGrade: 'A' | 'B' | 'C' | 'D';
    surfingLevel: 'BEGINNER' | 'INTERMEDIATE' | 'ADVANCED';
  };
  metadata: {
    modelVersion: string;
    dataSource: string;
    predictionType: 'FORECAST' | 'REALTIME';
    createdAt: string;
  };
  // Embedded spot metadata
  name: string;
  nameKo?: string;
  region: string;
  country: string;
  address?: string;
  difficulty: 'beginner' | 'intermediate' | 'advanced';
  waveType: string;
  bestSeason: string[];
  description?: string;
  descriptionKo?: string;
}
```

### DynamoDB: saved_list Table
```typescript
interface SavedListItem {
  userId: string;              // PK
  locationSurfKey: string;     // SK: "{LocationId}#{SurfTimestamp}"
  locationId: string;
  surfTimestamp: string;
  savedAt: string;
  address: string;
  region: string;
  country: string;
  departureDate: string;
  waveHeight: number;
  wavePeriod: number;
  windSpeed: number;
  waterTemperature: number;
  surfingLevel: string;
  surfScore: number;
  surfGrade: string;
  name: string;
  nameKo?: string;
}
```

## Backend Proposal

### API Endpoints (Future)
| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/surf/spots` | List surf spots with filters |
| GET | `/surf/spots/{locationId}` | Get spot by LocationId |
| GET | `/surf/search?q=` | Search spots by text |
| GET | `/saved` | Get user's saved list |
| POST | `/saved` | Save a spot |
| DELETE | `/saved/{locationSurfKey}` | Remove saved spot |

### Grade Thresholds
- A: surfScore >= 80
- B: surfScore >= 60
- C: surfScore >= 40
- D: surfScore < 40

### Surfing Level Mapping
- ADVANCED: waveHeight >= 2.5m OR windSpeed >= 30 km/h
- INTERMEDIATE: waveHeight >= 1.2m OR windSpeed >= 15 km/h
- BEGINNER: below intermediate thresholds

## Implementation Tracking

| Component | Status |
|-----------|--------|
| Frontend types | DONE |
| Frontend mock services | DONE |
| Frontend UI components | DONE |
| Backend API | PENDING |

## Sign-off
- Frontend Dev Agent: APPROVED
- Backend Dev Agent: PENDING (backend not yet implemented)
